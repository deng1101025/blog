"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[3681],{9571:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t={key:"v-52b78ab1",path:"/assets/vue/performance/1.%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96.html",title:"函数柯里化",lang:"zh-CN",frontmatter:{lang:"zh-CN",title:"函数柯里化",description:"函数柯里化对vue的性能优化点"},excerpt:"",headers:[{level:2,title:"产品设计之表单优化",slug:"产品设计之表单优化",children:[]},{level:2,title:"函数式开发中的柯里化",slug:"函数式开发中的柯里化",children:[]},{level:2,title:"函数柯里化的定义",slug:"函数柯里化的定义",children:[]},{level:2,title:"vue 函数柯里化思想",slug:"vue-函数柯里化思想",children:[]},{level:2,title:"vue中函数柯里化应用 markMap",slug:"vue中函数柯里化应用-markmap",children:[]}],filePathRelative:"assets/vue/performance/1.函数柯里化.md",git:{updatedTime:164121974e4,contributors:[{name:"邓占伟",email:"332877552@qq.com",commits:1}]}}},803:(n,s,a)=>{a.r(s),a.d(s,{default:()=>x});var t=a(6252),e=a(5238),o=a(978);const p=(0,t._)("h2",{id:"产品设计之表单优化",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#产品设计之表单优化","aria-hidden":"true"},"#"),(0,t.Uk)(" 产品设计之表单优化")],-1),c=(0,t._)("p",null,"作为产品，遇到很复杂的表单的时候一般都会想着分步骤让用户进行填写，特别是移动端更是如此，请看下图",-1),l=(0,t._)("p",null,[(0,t._)("img",{src:e,alt:"原图"})],-1),u=(0,t._)("p",null,[(0,t._)("img",{src:o,alt:"优化图"})],-1),r=(0,t._)("p",null,"图一给用户的第一感觉就是，我去，需要填写这么多东西啊，不填了（就和男女朋友第一次见面一样，首次印象很重要，首次印象不好，就别想有下次了），业务也是一样的，不能一上来就把用户吓跑了，所以图二就是很好的设计，这就是表单设计的柯里化思想",-1),k=(0,t._)("h2",{id:"函数式开发中的柯里化",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#函数式开发中的柯里化","aria-hidden":"true"},"#"),(0,t.Uk)(" 函数式开发中的柯里化")],-1),_=(0,t._)("p",null,"举一个很经典的例子（ 计算器 ）",-1),i=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"sum"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"var"),(0,t.Uk)(" sum "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"a"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" sum "),(0,t._)("span",{class:"token operator"},"+="),(0,t.Uk)(" a\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"var"),(0,t.Uk)(" add "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"sum"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token function"},"add"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"1"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// 1"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token function"},"add"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// 3"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token function"},"add"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"3"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// 6"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token function"},"add"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"4"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// 10"),(0,t.Uk)("\n\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br")])],-1),b=(0,t._)("p",null,"看到这里理解函数的柯里化了么",-1),m=(0,t._)("h2",{id:"函数柯里化的定义",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#函数柯里化的定义","aria-hidden":"true"},"#"),(0,t.Uk)(" 函数柯里化的定义")],-1),U=(0,t._)("blockquote",null,[(0,t._)("p",null,"维基百科上说道：柯里化，英语：Currying(果然是满满的英译中的既视感)，是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术。")],-1),d=(0,t._)("p",null,"那么看到这里跟vue有什么关系呢，跟性能优化有什么关系呢",-1),h=(0,t._)("h2",{id:"vue-函数柯里化思想",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#vue-函数柯里化思想","aria-hidden":"true"},"#"),(0,t.Uk)(" vue 函数柯里化思想")],-1),f=(0,t._)("p",null,"举个例子吧，模板中经常会出现。a.b.c 这种数据绑定关系，通过如下函数可以获得对象的 c 的属性值",-1),g=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// 没有柯里化, 性能消耗的地方是，每次渲染都需要split path "),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"getPropByPath"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("obj"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" path")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"var"),(0,t.Uk)(" props "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" path"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"split"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'.'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"var"),(0,t.Uk)(" prop"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"var"),(0,t.Uk)(" retValue "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" obj"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"while"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("prop "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"shift"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        retValue "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" retValue"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("prop"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" retValue\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token comment"},"// 柯里化， 在变异阶段进行一次 split path ，之后调用仅仅做属性的获取"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"createGetPropByPath"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"path"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"var"),(0,t.Uk)(" props "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" path"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"split"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'.'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"obj"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"var"),(0,t.Uk)(" prop"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"var"),(0,t.Uk)(" retValue "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" obj"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"while"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("prop "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"shift"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n           retValue "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" retValue"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("prop"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n        "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" retValue\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br")])],-1),v=(0,t._)("h2",{id:"vue中函数柯里化应用-markmap",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#vue中函数柯里化应用-markmap","aria-hidden":"true"},"#"),(0,t.Uk)(" vue中函数柯里化应用 markMap")],-1),w=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t.Uk)("    "),(0,t._)("span",{class:"token comment"},"// 判断元素"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"markMap"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"htmlStr"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" set "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        htmlStr"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"split"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"','"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"forEach"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)(),(0,t._)("span",{class:"token parameter"},"tag"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"set"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"true"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"tagName"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)("  "),(0,t._)("span",{class:"token operator"},"!"),(0,t._)("span",{class:"token operator"},"!"),(0,t._)("span",{class:"token keyword"},"set"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("tagName"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toLowerCase"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("        \n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" isHtmlTag "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"markMap"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token template-string"},[(0,t._)("span",{class:"token template-punctuation string"},"`"),(0,t._)("span",{class:"token string"},"\n        div,a,span,header,section,footer,h1,h2,h3,h4\n    "),(0,t._)("span",{class:"token template-punctuation string"},"`")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// 等等"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token function"},"isHtmlTag"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'div'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// true"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"usHtmlTag"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'List'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// false"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token comment"},"// 在编译时期就会得到isHtmlTag函数，避免运行时大量的组建判断造成的性能损失"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br")])],-1),y=(0,t._)("p",null,"总结：这仅仅是函数柯里化的部分应用实践，函数柯里化因为函数时编程必然出现的一个特征，用途很广泛，不仅仅是用在性能优化上，还能优化代码结构，层级，调用方式等等",-1),j={},x=(0,a(3744).Z)(j,[["render",function(n,s){return(0,t.wg)(),(0,t.iD)(t.HY,null,[p,c,l,u,r,k,_,i,b,m,U,d,h,f,g,v,w,y],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{for(const[a,t]of s)n[a]=t;return n}},5238:(n,s,a)=>{n.exports=a.p+"assets/img/form-long.e31148a9.png"},978:(n,s,a)=>{n.exports=a.p+"assets/img/form-short.998741b8.png"}}]);